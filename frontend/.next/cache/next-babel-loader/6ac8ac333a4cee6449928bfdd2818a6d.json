{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _url = require(\"url\");\n\nvar _mitt = _interopRequireDefault(require(\"../next-server/lib/mitt\"));\n\nvar _isDynamic = require(\"./../next-server/lib/router/utils/is-dynamic\");\n\nvar _routeMatcher = require(\"./../next-server/lib/router/utils/route-matcher\");\n\nvar _routeRegex = require(\"./../next-server/lib/router/utils/route-regex\");\n\nvar _router = require(\"./../next-server/lib/router/router\");\n\nfunction hasRel(rel, link) {\n  try {\n    link = document.createElement('link');\n    return link.relList.supports(rel);\n  } catch (_unused) {}\n}\n\nvar relPrefetch = hasRel('preload') && !hasRel('prefetch') ? // https://caniuse.com/#feat=link-rel-preload\n// macOS and iOS (Safari does not support prefetch)\n'preload' : // https://caniuse.com/#feat=link-rel-prefetch\n// IE 11, Edge 12+, nearly all evergreen\n'prefetch';\nvar hasNoModule = ('noModule' in document.createElement('script'));\n/** @param {string} route */\n\nfunction normalizeRoute(route) {\n  if (route[0] !== '/') {\n    throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\" + route + \"\\\"\");\n  }\n\n  route = route.replace(/\\/index$/, '/');\n  if (route === '/') return route;\n  return route.replace(/\\/$/, '');\n}\n\nfunction appendLink(href, rel, as) {\n  return new Promise((res, rej, link) => {\n    link = document.createElement('link');\n    link.crossOrigin = process.crossOrigin;\n    link.href = href;\n    link.rel = rel;\n    if (as) link.as = as;\n    link.onload = res;\n    link.onerror = rej;\n    document.head.appendChild(link);\n  });\n}\n\nclass PageLoader {\n  constructor(buildId, assetPrefix) {\n    this.buildId = buildId;\n    this.assetPrefix = assetPrefix;\n    this.pageCache = {};\n    this.pageRegisterEvents = (0, _mitt.default)();\n    this.loadingRoutes = {};\n\n    if (process.env.__NEXT_GRANULAR_CHUNKS) {\n      this.promisedBuildManifest = new Promise(resolve => {\n        if (window.__BUILD_MANIFEST) {\n          resolve(window.__BUILD_MANIFEST);\n        } else {\n          window.__BUILD_MANIFEST_CB = () => {\n            resolve(window.__BUILD_MANIFEST);\n          };\n        }\n      });\n    }\n    /** @type {Promise<Set<string>>} */\n\n\n    this.promisedSsgManifest = new Promise(resolve => {\n      if (window.__SSG_MANIFEST) {\n        resolve(window.__SSG_MANIFEST);\n      } else {\n        window.__SSG_MANIFEST_CB = () => {\n          resolve(window.__SSG_MANIFEST);\n        };\n      }\n    });\n  } // Returns a promise for the dependencies for a particular route\n\n\n  getDependencies(route) {\n    return this.promisedBuildManifest.then(man => man[route] && man[route].map(url => this.assetPrefix + \"/_next/\" + encodeURI(url)) || []);\n  }\n  /**\n  * @param {string} href the route href (file-system path)\n  * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n  */\n\n\n  getDataHref(href, asPath) {\n    var getHrefForSlug =\n    /** @type string */\n    path => {\n      path = (0, _router.delBasePath)(path);\n      return this.assetPrefix + \"/_next/data/\" + this.buildId + (path === '/' ? '/index' : path) + \".json\";\n    };\n\n    var {\n      pathname: hrefPathname,\n      query\n    } = (0, _url.parse)(href, true);\n    var {\n      pathname: asPathname\n    } = (0, _url.parse)(asPath);\n    var route = normalizeRoute(hrefPathname);\n    var isDynamic = (0, _isDynamic.isDynamicRoute)(route),\n        interpolatedRoute;\n\n    if (isDynamic) {\n      var dynamicRegex = (0, _routeRegex.getRouteRegex)(route);\n      var dynamicGroups = dynamicRegex.groups;\n      var dynamicMatches = // Try to match the dynamic route against the asPath\n      (0, _routeMatcher.getRouteMatcher)(dynamicRegex)(asPathname) || // Fall back to reading the values from the href\n      // TODO: should this take priority; also need to change in the router.\n      query;\n      interpolatedRoute = route;\n\n      if (!Object.keys(dynamicGroups).every(param => {\n        var value = dynamicMatches[param];\n        var repeat = dynamicGroups[param].repeat; // support single-level catch-all\n        // TODO: more robust handling for user-error (passing `/`)\n\n        if (repeat && !Array.isArray(value)) value = [value];\n        return param in dynamicMatches && ( // Interpolate group into data URL if present\n        interpolatedRoute = interpolatedRoute.replace(\"[\" + (repeat ? '...' : '') + param + \"]\", repeat ? value.map(encodeURIComponent).join('/') : encodeURIComponent(value)));\n      })) {\n        interpolatedRoute = ''; // did not satisfy all requirements\n        // n.b. We ignore this error because we handle warning for this case in\n        // development in the `<Link>` component directly.\n      }\n    }\n\n    return isDynamic ? interpolatedRoute && getHrefForSlug(interpolatedRoute) : getHrefForSlug(route);\n  }\n  /**\n  * @param {string} href the route href (file-system path)\n  * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n  */\n\n\n  prefetchData(href, asPath) {\n    var {\n      pathname: hrefPathname\n    } = (0, _url.parse)(href, true);\n    var route = normalizeRoute(hrefPathname);\n    return this.promisedSsgManifest.then((s, _dataHref) => // Check if the route requires a data file\n    s.has(route) && ( // Try to generate data href, noop when falsy\n    _dataHref = this.getDataHref(href, asPath)) && // noop when data has already been prefetched (dedupe)\n    !document.querySelector(\"link[rel=\\\"\" + relPrefetch + \"\\\"][href^=\\\"\" + _dataHref + \"\\\"]\") && // Inject the `<link rel=prefetch>` tag for above computed `href`.\n    appendLink(_dataHref, relPrefetch, 'fetch'));\n  }\n\n  loadPage(route) {\n    return this.loadPageScript(route);\n  }\n\n  loadPageScript(route) {\n    route = normalizeRoute(route);\n    return new Promise((resolve, reject) => {\n      var fire = _ref => {\n        var {\n          error,\n          page,\n          mod\n        } = _ref;\n        this.pageRegisterEvents.off(route, fire);\n        delete this.loadingRoutes[route];\n\n        if (error) {\n          reject(error);\n        } else {\n          resolve({\n            page,\n            mod\n          });\n        }\n      }; // If there's a cached version of the page, let's use it.\n\n\n      var cachedPage = this.pageCache[route];\n\n      if (cachedPage) {\n        var {\n          error,\n          page,\n          mod\n        } = cachedPage;\n        error ? reject(error) : resolve({\n          page,\n          mod\n        });\n        return;\n      } // Register a listener to get the page\n\n\n      this.pageRegisterEvents.on(route, fire); // If the page is loading via SSR, we need to wait for it\n      // rather downloading it again.\n\n      if (document.querySelector(\"script[data-next-page=\\\"\" + route + \"\\\"]\")) {\n        return;\n      }\n\n      if (!this.loadingRoutes[route]) {\n        this.loadingRoutes[route] = true;\n\n        if (process.env.__NEXT_GRANULAR_CHUNKS) {\n          this.getDependencies(route).then(deps => {\n            deps.forEach(d => {\n              if (/\\.js$/.test(d) && !document.querySelector(\"script[src^=\\\"\" + d + \"\\\"]\")) {\n                this.loadScript(d, route, false);\n              }\n\n              if (/\\.css$/.test(d) && !document.querySelector(\"link[rel=stylesheet][href^=\\\"\" + d + \"\\\"]\")) {\n                appendLink(d, 'stylesheet').catch(() => {// FIXME: handle failure\n                  // Right now, this is needed to prevent an unhandled rejection.\n                });\n              }\n            });\n            this.loadRoute(route);\n          });\n        } else {\n          this.loadRoute(route);\n        }\n      }\n    });\n  }\n\n  loadRoute(route) {\n    route = normalizeRoute(route);\n    var scriptRoute = route === '/' ? '/index.js' : route + \".js\";\n    var url = this.assetPrefix + \"/_next/static/\" + encodeURIComponent(this.buildId) + \"/pages\" + encodeURI(scriptRoute);\n    this.loadScript(url, route, true);\n  }\n\n  loadScript(url, route, isPage) {\n    var script = document.createElement('script');\n\n    if (process.env.__NEXT_MODERN_BUILD && hasNoModule) {\n      script.type = 'module'; // Only page bundle scripts need to have .module added to url,\n      // dependencies already have it added during build manifest creation\n\n      if (isPage) url = url.replace(/\\.js$/, '.module.js');\n    }\n\n    script.crossOrigin = process.crossOrigin;\n    script.src = url;\n\n    script.onerror = () => {\n      var error = new Error(\"Error loading script \" + url);\n      error.code = 'PAGE_LOAD_ERROR';\n      this.pageRegisterEvents.emit(route, {\n        error\n      });\n    };\n\n    document.body.appendChild(script);\n  } // This method if called by the route code.\n\n\n  registerPage(route, regFn) {\n    var register = () => {\n      try {\n        var mod = regFn();\n        var pageData = {\n          page: mod.default || mod,\n          mod\n        };\n        this.pageCache[route] = pageData;\n        this.pageRegisterEvents.emit(route, pageData);\n      } catch (error) {\n        this.pageCache[route] = {\n          error\n        };\n        this.pageRegisterEvents.emit(route, {\n          error\n        });\n      }\n    };\n\n    if (true) {\n      // Wait for webpack to become idle if it's not.\n      // More info: https://github.com/zeit/next.js/pull/1511\n      if (module.hot && module.hot.status() !== 'idle') {\n        console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\" + route + \"\\\"\");\n\n        var check = status => {\n          if (status === 'idle') {\n            module.hot.removeStatusHandler(check);\n            register();\n          }\n        };\n\n        module.hot.status(check);\n        return;\n      }\n    }\n\n    register();\n  }\n  /**\n  * @param {string} route\n  * @param {boolean} [isDependency]\n  */\n\n\n  prefetch(route, isDependency) {\n    // https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n    // License: Apache 2.0\n    var cn;\n\n    if (cn = navigator.connection) {\n      // Don't prefetch if using 2G or if Save-Data is enabled.\n      if (cn.saveData || /2g/.test(cn.effectiveType)) return Promise.resolve();\n    }\n    /** @type {string} */\n\n\n    var url;\n\n    if (isDependency) {\n      url = route;\n    } else {\n      route = normalizeRoute(route);\n      var scriptRoute = (route === '/' ? '/index' : route) + \".js\";\n\n      if (process.env.__NEXT_MODERN_BUILD && hasNoModule) {\n        scriptRoute = scriptRoute.replace(/\\.js$/, '.module.js');\n      }\n\n      url = this.assetPrefix + \"/_next/static/\" + encodeURIComponent(this.buildId) + \"/pages\" + encodeURI(scriptRoute);\n    }\n\n    return Promise.all(document.querySelector(\"link[rel=\\\"\" + relPrefetch + \"\\\"][href^=\\\"\" + url + \"\\\"], script[data-next-page=\\\"\" + route + \"\\\"]\") ? [] : [appendLink(url, relPrefetch, url.match(/\\.css$/) ? 'style' : 'script'), process.env.__NEXT_GRANULAR_CHUNKS && !isDependency && this.getDependencies(route).then(urls => Promise.all(urls.map(url => this.prefetch(url, true))))]).then( // do not return any data\n    () => {}, // swallow prefetch errors\n    () => {});\n  }\n\n}\n\nexports.default = PageLoader;","map":{"version":3,"sources":["/Users/vaspahomov/Desktop/Workspace/web-project/frontend/node_modules/next/dist/client/page-loader.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_url","_mitt","_isDynamic","_routeMatcher","_routeRegex","_router","hasRel","rel","link","document","createElement","relList","supports","_unused","relPrefetch","hasNoModule","normalizeRoute","route","Error","replace","appendLink","href","as","Promise","res","rej","crossOrigin","process","onload","onerror","head","appendChild","PageLoader","constructor","buildId","assetPrefix","pageCache","pageRegisterEvents","loadingRoutes","env","__NEXT_GRANULAR_CHUNKS","promisedBuildManifest","resolve","window","__BUILD_MANIFEST","__BUILD_MANIFEST_CB","promisedSsgManifest","__SSG_MANIFEST","__SSG_MANIFEST_CB","getDependencies","then","man","map","url","encodeURI","getDataHref","asPath","getHrefForSlug","path","delBasePath","pathname","hrefPathname","query","parse","asPathname","isDynamic","isDynamicRoute","interpolatedRoute","dynamicRegex","getRouteRegex","dynamicGroups","groups","dynamicMatches","getRouteMatcher","Object","keys","every","param","value","repeat","Array","isArray","encodeURIComponent","join","prefetchData","s","_dataHref","has","querySelector","loadPage","loadPageScript","reject","fire","_ref","error","page","mod","off","cachedPage","on","deps","forEach","d","test","loadScript","catch","loadRoute","scriptRoute","isPage","script","__NEXT_MODERN_BUILD","type","src","code","emit","body","registerPage","regFn","register","pageData","module","hot","status","console","log","check","removeStatusHandler","prefetch","isDependency","cn","navigator","connection","saveData","effectiveType","all","match","urls"],"mappings":"AAAA;;AAAa,IAAIA,sBAAsB,GAACC,OAAO,CAAC,8CAAD,CAAlC;;AAAmFC,OAAO,CAACC,UAAR,GAAmB,IAAnB;AAAwBD,OAAO,CAACE,OAAR,GAAgB,KAAK,CAArB;;AAAuB,IAAIC,IAAI,GAACJ,OAAO,CAAC,KAAD,CAAhB;;AAAwB,IAAIK,KAAK,GAACN,sBAAsB,CAACC,OAAO,CAAC,yBAAD,CAAR,CAAhC;;AAAqE,IAAIM,UAAU,GAACN,OAAO,CAAC,8CAAD,CAAtB;;AAAuE,IAAIO,aAAa,GAACP,OAAO,CAAC,iDAAD,CAAzB;;AAA6E,IAAIQ,WAAW,GAACR,OAAO,CAAC,+CAAD,CAAvB;;AAAyE,IAAIS,OAAO,GAACT,OAAO,CAAC,oCAAD,CAAnB;;AAA0D,SAASU,MAAT,CAAgBC,GAAhB,EAAoBC,IAApB,EAAyB;AAAC,MAAG;AAACA,IAAAA,IAAI,GAACC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAL;AAAoC,WAAOF,IAAI,CAACG,OAAL,CAAaC,QAAb,CAAsBL,GAAtB,CAAP;AAAmC,GAA3E,CAA2E,OAAMM,OAAN,EAAc,CAAE;AAAC;;AAAA,IAAIC,WAAW,GAACR,MAAM,CAAC,SAAD,CAAN,IAAmB,CAACA,MAAM,CAAC,UAAD,CAA1B,GAAuC;AAChrB;AACA,SAFyoB,GAE/nB;AACV;AACA,UAJynB;AAI9mB,IAAIS,WAAW,IAAC,cAAaN,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAd,CAAf;AAA8D;;AAA4B,SAASM,cAAT,CAAwBC,KAAxB,EAA8B;AAAC,MAAGA,KAAK,CAAC,CAAD,CAAL,KAAW,GAAd,EAAkB;AAAC,UAAM,IAAIC,KAAJ,CAAU,iDAA+CD,KAA/C,GAAqD,IAA/D,CAAN;AAA4E;;AAAAA,EAAAA,KAAK,GAACA,KAAK,CAACE,OAAN,CAAc,UAAd,EAAyB,GAAzB,CAAN;AAAoC,MAAGF,KAAK,KAAG,GAAX,EAAe,OAAOA,KAAP;AAAa,SAAOA,KAAK,CAACE,OAAN,CAAc,KAAd,EAAoB,EAApB,CAAP;AAAgC;;AAAA,SAASC,UAAT,CAAoBC,IAApB,EAAyBd,GAAzB,EAA6Be,EAA7B,EAAgC;AAAC,SAAO,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAKC,GAAL,EAASjB,IAAT,KAAgB;AAACA,IAAAA,IAAI,GAACC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAL;AAAoCF,IAAAA,IAAI,CAACkB,WAAL,GAAiBC,OAAO,CAACD,WAAzB;AAAqClB,IAAAA,IAAI,CAACa,IAAL,GAAUA,IAAV;AAAeb,IAAAA,IAAI,CAACD,GAAL,GAASA,GAAT;AAAa,QAAGe,EAAH,EAAMd,IAAI,CAACc,EAAL,GAAQA,EAAR;AAAWd,IAAAA,IAAI,CAACoB,MAAL,GAAYJ,GAAZ;AAAgBhB,IAAAA,IAAI,CAACqB,OAAL,GAAaJ,GAAb;AAAiBhB,IAAAA,QAAQ,CAACqB,IAAT,CAAcC,WAAd,CAA0BvB,IAA1B;AAAiC,GAArN,CAAP;AAA+N;;AAAA,MAAMwB,UAAN,CAAgB;AAACC,EAAAA,WAAW,CAACC,OAAD,EAASC,WAAT,EAAqB;AAAC,SAAKD,OAAL,GAAaA,OAAb;AAAqB,SAAKC,WAAL,GAAiBA,WAAjB;AAA6B,SAAKC,SAAL,GAAe,EAAf;AAAkB,SAAKC,kBAAL,GAAwB,CAAC,GAAEpC,KAAK,CAACF,OAAT,GAAxB;AAA4C,SAAKuC,aAAL,GAAmB,EAAnB;;AAAsB,QAAGX,OAAO,CAACY,GAAR,CAAYC,sBAAf,EAAsC;AAAC,WAAKC,qBAAL,GAA2B,IAAIlB,OAAJ,CAAYmB,OAAO,IAAE;AAAC,YAAGC,MAAM,CAACC,gBAAV,EAA2B;AAACF,UAAAA,OAAO,CAACC,MAAM,CAACC,gBAAR,CAAP;AAAkC,SAA9D,MAAkE;AAACD,UAAAA,MAAM,CAACE,mBAAP,GAA2B,MAAI;AAACH,YAAAA,OAAO,CAACC,MAAM,CAACC,gBAAR,CAAP;AAAkC,WAAlE;AAAoE;AAAC,OAA9J,CAA3B;AAA4L;AAAA;;;AAAmC,SAAKE,mBAAL,GAAyB,IAAIvB,OAAJ,CAAYmB,OAAO,IAAE;AAAC,UAAGC,MAAM,CAACI,cAAV,EAAyB;AAACL,QAAAA,OAAO,CAACC,MAAM,CAACI,cAAR,CAAP;AAAgC,OAA1D,MAA8D;AAACJ,QAAAA,MAAM,CAACK,iBAAP,GAAyB,MAAI;AAACN,UAAAA,OAAO,CAACC,MAAM,CAACI,cAAR,CAAP;AAAgC,SAA9D;AAAgE;AAAC,KAAtJ,CAAzB;AAAkL,GAAhmB,CAAgmB;;;AACnrCE,EAAAA,eAAe,CAAChC,KAAD,EAAO;AAAC,WAAO,KAAKwB,qBAAL,CAA2BS,IAA3B,CAAgCC,GAAG,IAAEA,GAAG,CAAClC,KAAD,CAAH,IAAYkC,GAAG,CAAClC,KAAD,CAAH,CAAWmC,GAAX,CAAeC,GAAG,IAAE,KAAKlB,WAAL,GAAiB,SAAjB,GAA2BmB,SAAS,CAACD,GAAD,CAAxD,CAAZ,IAA4E,EAAjH,CAAP;AAA6H;AAAA;;;;;;AAG/IE,EAAAA,WAAW,CAAClC,IAAD,EAAMmC,MAAN,EAAa;AAAC,QAAIC,cAAc;AAAC;AAAmBC,IAAAA,IAAI,IAAE;AAACA,MAAAA,IAAI,GAAC,CAAC,GAAErD,OAAO,CAACsD,WAAX,EAAwBD,IAAxB,CAAL;AAAmC,aAAO,KAAKvB,WAAL,GAAiB,cAAjB,GAAgC,KAAKD,OAArC,IAA8CwB,IAAI,KAAG,GAAP,GAAW,QAAX,GAAoBA,IAAlE,IAAwE,OAA/E;AAAwF,KAAxK;;AAAyK,QAAG;AAACE,MAAAA,QAAQ,EAACC,YAAV;AAAuBC,MAAAA;AAAvB,QAA8B,CAAC,GAAE9D,IAAI,CAAC+D,KAAR,EAAe1C,IAAf,EAAoB,IAApB,CAAjC;AAA2D,QAAG;AAACuC,MAAAA,QAAQ,EAACI;AAAV,QAAsB,CAAC,GAAEhE,IAAI,CAAC+D,KAAR,EAAeP,MAAf,CAAzB;AAAgD,QAAIvC,KAAK,GAACD,cAAc,CAAC6C,YAAD,CAAxB;AAAuC,QAAII,SAAS,GAAC,CAAC,GAAE/D,UAAU,CAACgE,cAAd,EAA8BjD,KAA9B,CAAd;AAAA,QAAmDkD,iBAAnD;;AAAqE,QAAGF,SAAH,EAAa;AAAC,UAAIG,YAAY,GAAC,CAAC,GAAEhE,WAAW,CAACiE,aAAf,EAA8BpD,KAA9B,CAAjB;AAAsD,UAAIqD,aAAa,GAACF,YAAY,CAACG,MAA/B;AAAsC,UAAIC,cAAc,GAAC;AAC3hB,OAAC,GAAErE,aAAa,CAACsE,eAAjB,EAAkCL,YAAlC,EAAgDJ,UAAhD,KAA6D;AAC7D;AACAF,MAAAA,KAHwgB;AAGlgBK,MAAAA,iBAAiB,GAAClD,KAAlB;;AAAwB,UAAG,CAACyD,MAAM,CAACC,IAAP,CAAYL,aAAZ,EAA2BM,KAA3B,CAAiCC,KAAK,IAAE;AAAC,YAAIC,KAAK,GAACN,cAAc,CAACK,KAAD,CAAxB;AAAgC,YAAIE,MAAM,GAACT,aAAa,CAACO,KAAD,CAAb,CAAqBE,MAAhC,CAAjC,CAAwE;AAClJ;;AACA,YAAGA,MAAM,IAAE,CAACC,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAZ,EAAiCA,KAAK,GAAC,CAACA,KAAD,CAAN;AAAc,eAAOD,KAAK,IAAIL,cAAT,MAA0B;AAChFL,QAAAA,iBAAiB,GAACA,iBAAiB,CAAChD,OAAlB,CAA0B,OAAK4D,MAAM,GAAC,KAAD,GAAO,EAAlB,IAAsBF,KAAtB,GAA4B,GAAtD,EAA0DE,MAAM,GAACD,KAAK,CAAC1B,GAAN,CAAU8B,kBAAV,EAA8BC,IAA9B,CAAmC,GAAnC,CAAD,GAAyCD,kBAAkB,CAACJ,KAAD,CAA3H,CADoC,CAAP;AACyG,OAHtH,CAAJ,EAG4H;AAACX,QAAAA,iBAAiB,GAAC,EAAlB,CAAD,CAAsB;AAChL;AACA;AACC;AAAC;;AAAA,WAAOF,SAAS,GAACE,iBAAiB,IAAEV,cAAc,CAACU,iBAAD,CAAlC,GAAsDV,cAAc,CAACxC,KAAD,CAApF;AAA6F;AAAA;;;;;;AAG1FmE,EAAAA,YAAY,CAAC/D,IAAD,EAAMmC,MAAN,EAAa;AAAC,QAAG;AAACI,MAAAA,QAAQ,EAACC;AAAV,QAAwB,CAAC,GAAE7D,IAAI,CAAC+D,KAAR,EAAe1C,IAAf,EAAoB,IAApB,CAA3B;AAAqD,QAAIJ,KAAK,GAACD,cAAc,CAAC6C,YAAD,CAAxB;AAAuC,WAAO,KAAKf,mBAAL,CAAyBI,IAAzB,CAA8B,CAACmC,CAAD,EAAGC,SAAH,KAAe;AAC/KD,IAAAA,CAAC,CAACE,GAAF,CAAMtE,KAAN,OAAe;AACfqE,IAAAA,SAAS,GAAC,KAAK/B,WAAL,CAAiBlC,IAAjB,EAAsBmC,MAAtB,CADV,KAC0C;AAC1C,KAAC/C,QAAQ,CAAC+E,aAAT,CAAuB,gBAAc1E,WAAd,GAA0B,cAA1B,GAAyCwE,SAAzC,GAAmD,KAA1E,CAFD,IAEmF;AACnFlE,IAAAA,UAAU,CAACkE,SAAD,EAAWxE,WAAX,EAAuB,OAAvB,CAJwH,CAAP;AAI/E;;AAAA2E,EAAAA,QAAQ,CAACxE,KAAD,EAAO;AAAC,WAAO,KAAKyE,cAAL,CAAoBzE,KAApB,CAAP;AAAmC;;AAAAyE,EAAAA,cAAc,CAACzE,KAAD,EAAO;AAACA,IAAAA,KAAK,GAACD,cAAc,CAACC,KAAD,CAApB;AAA4B,WAAO,IAAIM,OAAJ,CAAY,CAACmB,OAAD,EAASiD,MAAT,KAAkB;AAAC,UAAIC,IAAI,GAAEC,IAAD,IAAQ;AAAC,YAAG;AAACC,UAAAA,KAAD;AAAOC,UAAAA,IAAP;AAAYC,UAAAA;AAAZ,YAAiBH,IAApB;AAAyB,aAAKxD,kBAAL,CAAwB4D,GAAxB,CAA4BhF,KAA5B,EAAkC2E,IAAlC;AAAwC,eAAO,KAAKtD,aAAL,CAAmBrB,KAAnB,CAAP;;AAAiC,YAAG6E,KAAH,EAAS;AAACH,UAAAA,MAAM,CAACG,KAAD,CAAN;AAAe,SAAzB,MAA6B;AAACpD,UAAAA,OAAO,CAAC;AAACqD,YAAAA,IAAD;AAAMC,YAAAA;AAAN,WAAD,CAAP;AAAqB;AAAC,OAAxK,CAAD,CAA0K;;;AAChW,UAAIE,UAAU,GAAC,KAAK9D,SAAL,CAAenB,KAAf,CAAf;;AAAqC,UAAGiF,UAAH,EAAc;AAAC,YAAG;AAACJ,UAAAA,KAAD;AAAOC,UAAAA,IAAP;AAAYC,UAAAA;AAAZ,YAAiBE,UAApB;AAA+BJ,QAAAA,KAAK,GAACH,MAAM,CAACG,KAAD,CAAP,GAAepD,OAAO,CAAC;AAACqD,UAAAA,IAAD;AAAMC,UAAAA;AAAN,SAAD,CAA3B;AAAwC;AAAQ,OADmD,CACnD;;;AACnI,WAAK3D,kBAAL,CAAwB8D,EAAxB,CAA2BlF,KAA3B,EAAiC2E,IAAjC,EAFsL,CAE/I;AACvC;;AACA,UAAGnF,QAAQ,CAAC+E,aAAT,CAAuB,6BAA2BvE,KAA3B,GAAiC,KAAxD,CAAH,EAAkE;AAAC;AAAQ;;AAAA,UAAG,CAAC,KAAKqB,aAAL,CAAmBrB,KAAnB,CAAJ,EAA8B;AAAC,aAAKqB,aAAL,CAAmBrB,KAAnB,IAA0B,IAA1B;;AAA+B,YAAGU,OAAO,CAACY,GAAR,CAAYC,sBAAf,EAAsC;AAAC,eAAKS,eAAL,CAAqBhC,KAArB,EAA4BiC,IAA5B,CAAiCkD,IAAI,IAAE;AAACA,YAAAA,IAAI,CAACC,OAAL,CAAaC,CAAC,IAAE;AAAC,kBAAG,QAAQC,IAAR,CAAaD,CAAb,KAAiB,CAAC7F,QAAQ,CAAC+E,aAAT,CAAuB,mBAAiBc,CAAjB,GAAmB,KAA1C,CAArB,EAAsE;AAAC,qBAAKE,UAAL,CAAgBF,CAAhB,EAAkBrF,KAAlB,EAAwB,KAAxB;AAAgC;;AAAA,kBAAG,SAASsF,IAAT,CAAcD,CAAd,KAAkB,CAAC7F,QAAQ,CAAC+E,aAAT,CAAuB,kCAAgCc,CAAhC,GAAkC,KAAzD,CAAtB,EAAsF;AAAClF,gBAAAA,UAAU,CAACkF,CAAD,EAAG,YAAH,CAAV,CAA2BG,KAA3B,CAAiC,MAAI,CAAC;AAC7c;AACC,iBAFsa;AAEna;AAAC,aAFmN;AAEjN,iBAAKC,SAAL,CAAezF,KAAf;AAAuB,WAFkJ;AAE/I,SAFwG,MAEpG;AAAC,eAAKyF,SAAL,CAAezF,KAAf;AAAuB;AAAC;AAAC,KANyF,CAAP;AAM/E;;AAAAyF,EAAAA,SAAS,CAACzF,KAAD,EAAO;AAACA,IAAAA,KAAK,GAACD,cAAc,CAACC,KAAD,CAApB;AAA4B,QAAI0F,WAAW,GAAC1F,KAAK,KAAG,GAAR,GAAY,WAAZ,GAAwBA,KAAK,GAAC,KAA9C;AAAoD,QAAIoC,GAAG,GAAC,KAAKlB,WAAL,GAAiB,gBAAjB,GAAkC+C,kBAAkB,CAAC,KAAKhD,OAAN,CAApD,GAAmE,QAAnE,GAA4EoB,SAAS,CAACqD,WAAD,CAA7F;AAA2G,SAAKH,UAAL,CAAgBnD,GAAhB,EAAoBpC,KAApB,EAA0B,IAA1B;AAAiC;;AAAAuF,EAAAA,UAAU,CAACnD,GAAD,EAAKpC,KAAL,EAAW2F,MAAX,EAAkB;AAAC,QAAIC,MAAM,GAACpG,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAX;;AAA4C,QAAGiB,OAAO,CAACY,GAAR,CAAYuE,mBAAZ,IAAiC/F,WAApC,EAAgD;AAAC8F,MAAAA,MAAM,CAACE,IAAP,GAAY,QAAZ,CAAD,CAAsB;AAC9b;;AACA,UAAGH,MAAH,EAAUvD,GAAG,GAACA,GAAG,CAAClC,OAAJ,CAAY,OAAZ,EAAoB,YAApB,CAAJ;AAAuC;;AAAA0F,IAAAA,MAAM,CAACnF,WAAP,GAAmBC,OAAO,CAACD,WAA3B;AAAuCmF,IAAAA,MAAM,CAACG,GAAP,GAAW3D,GAAX;;AAAewD,IAAAA,MAAM,CAAChF,OAAP,GAAe,MAAI;AAAC,UAAIiE,KAAK,GAAC,IAAI5E,KAAJ,CAAU,0BAAwBmC,GAAlC,CAAV;AAAiDyC,MAAAA,KAAK,CAACmB,IAAN,GAAW,iBAAX;AAA6B,WAAK5E,kBAAL,CAAwB6E,IAAxB,CAA6BjG,KAA7B,EAAmC;AAAC6E,QAAAA;AAAD,OAAnC;AAA6C,KAA/I;;AAAgJrF,IAAAA,QAAQ,CAAC0G,IAAT,CAAcpF,WAAd,CAA0B8E,MAA1B;AAAmC,GA5ByT,CA4BzT;;;AAC1RO,EAAAA,YAAY,CAACnG,KAAD,EAAOoG,KAAP,EAAa;AAAC,QAAIC,QAAQ,GAAC,MAAI;AAAC,UAAG;AAAC,YAAItB,GAAG,GAACqB,KAAK,EAAb;AAAgB,YAAIE,QAAQ,GAAC;AAACxB,UAAAA,IAAI,EAACC,GAAG,CAACjG,OAAJ,IAAaiG,GAAnB;AAAuBA,UAAAA;AAAvB,SAAb;AAAyC,aAAK5D,SAAL,CAAenB,KAAf,IAAsBsG,QAAtB;AAA+B,aAAKlF,kBAAL,CAAwB6E,IAAxB,CAA6BjG,KAA7B,EAAmCsG,QAAnC;AAA8C,OAA1I,CAA0I,OAAMzB,KAAN,EAAY;AAAC,aAAK1D,SAAL,CAAenB,KAAf,IAAsB;AAAC6E,UAAAA;AAAD,SAAtB;AAA8B,aAAKzD,kBAAL,CAAwB6E,IAAxB,CAA6BjG,KAA7B,EAAmC;AAAC6E,UAAAA;AAAD,SAAnC;AAA6C;AAAC,KAArP;;AAAsP,cAAuC;AAAC;AACxT;AACA,UAAG0B,MAAM,CAACC,GAAP,IAAYD,MAAM,CAACC,GAAP,CAAWC,MAAX,OAAsB,MAArC,EAA4C;AAACC,QAAAA,OAAO,CAACC,GAAR,CAAY,sEAAoE3G,KAApE,GAA0E,IAAtF;;AAA4F,YAAI4G,KAAK,GAACH,MAAM,IAAE;AAAC,cAAGA,MAAM,KAAG,MAAZ,EAAmB;AAACF,YAAAA,MAAM,CAACC,GAAP,CAAWK,mBAAX,CAA+BD,KAA/B;AAAsCP,YAAAA,QAAQ;AAAI;AAAC,SAA1F;;AAA2FE,QAAAA,MAAM,CAACC,GAAP,CAAWC,MAAX,CAAkBG,KAAlB;AAAyB;AAAQ;AAAC;;AAAAP,IAAAA,QAAQ;AAAI;AAAA;;;;;;AAG7QS,EAAAA,QAAQ,CAAC9G,KAAD,EAAO+G,YAAP,EAAoB;AAAC;AAClC;AACA,QAAIC,EAAJ;;AAAO,QAAGA,EAAE,GAACC,SAAS,CAACC,UAAhB,EAA2B;AAAC;AACnC,UAAGF,EAAE,CAACG,QAAH,IAAa,KAAK7B,IAAL,CAAU0B,EAAE,CAACI,aAAb,CAAhB,EAA4C,OAAO9G,OAAO,CAACmB,OAAR,EAAP;AAA0B;AAAA;;;AAAqB,QAAIW,GAAJ;;AAAQ,QAAG2E,YAAH,EAAgB;AAAC3E,MAAAA,GAAG,GAACpC,KAAJ;AAAW,KAA5B,MAAgC;AAACA,MAAAA,KAAK,GAACD,cAAc,CAACC,KAAD,CAApB;AAA4B,UAAI0F,WAAW,GAAC,CAAC1F,KAAK,KAAG,GAAR,GAAY,QAAZ,GAAqBA,KAAtB,IAA6B,KAA7C;;AAAmD,UAAGU,OAAO,CAACY,GAAR,CAAYuE,mBAAZ,IAAiC/F,WAApC,EAAgD;AAAC4F,QAAAA,WAAW,GAACA,WAAW,CAACxF,OAAZ,CAAoB,OAApB,EAA4B,YAA5B,CAAZ;AAAuD;;AAAAkC,MAAAA,GAAG,GAAC,KAAKlB,WAAL,GAAiB,gBAAjB,GAAkC+C,kBAAkB,CAAC,KAAKhD,OAAN,CAApD,GAAmE,QAAnE,GAA4EoB,SAAS,CAACqD,WAAD,CAAzF;AAAwG;;AAAA,WAAOpF,OAAO,CAAC+G,GAAR,CAAY7H,QAAQ,CAAC+E,aAAT,CAAuB,gBAAc1E,WAAd,GAA0B,cAA1B,GAAyCuC,GAAzC,GAA6C,+BAA7C,GAA6EpC,KAA7E,GAAmF,KAA1G,IAAiH,EAAjH,GAAoH,CAACG,UAAU,CAACiC,GAAD,EAAKvC,WAAL,EAAiBuC,GAAG,CAACkF,KAAJ,CAAU,QAAV,IAAoB,OAApB,GAA4B,QAA7C,CAAX,EAAkE5G,OAAO,CAACY,GAAR,CAAYC,sBAAZ,IAAoC,CAACwF,YAArC,IAAmD,KAAK/E,eAAL,CAAqBhC,KAArB,EAA4BiC,IAA5B,CAAiCsF,IAAI,IAAEjH,OAAO,CAAC+G,GAAR,CAAYE,IAAI,CAACpF,GAAL,CAASC,GAAG,IAAE,KAAK0E,QAAL,CAAc1E,GAAd,EAAkB,IAAlB,CAAd,CAAZ,CAAvC,CAArH,CAAhI,EAAmVH,IAAnV,EAAwV;AAClwB,UAAI,CAAE,CADoa,EACna;AACP,UAAI,CAAE,CAFoa,CAAP;AAE1Z;;AAvC0kB;;AAuCzkBrD,OAAO,CAACE,OAAR,GAAgBiC,UAAhB","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _url=require(\"url\");var _mitt=_interopRequireDefault(require(\"../next-server/lib/mitt\"));var _isDynamic=require(\"./../next-server/lib/router/utils/is-dynamic\");var _routeMatcher=require(\"./../next-server/lib/router/utils/route-matcher\");var _routeRegex=require(\"./../next-server/lib/router/utils/route-regex\");var _router=require(\"./../next-server/lib/router/router\");function hasRel(rel,link){try{link=document.createElement('link');return link.relList.supports(rel);}catch(_unused){}}var relPrefetch=hasRel('preload')&&!hasRel('prefetch')?// https://caniuse.com/#feat=link-rel-preload\n// macOS and iOS (Safari does not support prefetch)\n'preload':// https://caniuse.com/#feat=link-rel-prefetch\n// IE 11, Edge 12+, nearly all evergreen\n'prefetch';var hasNoModule='noModule'in document.createElement('script');/** @param {string} route */function normalizeRoute(route){if(route[0]!=='/'){throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\"+route+\"\\\"\");}route=route.replace(/\\/index$/,'/');if(route==='/')return route;return route.replace(/\\/$/,'');}function appendLink(href,rel,as){return new Promise((res,rej,link)=>{link=document.createElement('link');link.crossOrigin=process.crossOrigin;link.href=href;link.rel=rel;if(as)link.as=as;link.onload=res;link.onerror=rej;document.head.appendChild(link);});}class PageLoader{constructor(buildId,assetPrefix){this.buildId=buildId;this.assetPrefix=assetPrefix;this.pageCache={};this.pageRegisterEvents=(0,_mitt.default)();this.loadingRoutes={};if(process.env.__NEXT_GRANULAR_CHUNKS){this.promisedBuildManifest=new Promise(resolve=>{if(window.__BUILD_MANIFEST){resolve(window.__BUILD_MANIFEST);}else{window.__BUILD_MANIFEST_CB=()=>{resolve(window.__BUILD_MANIFEST);};}});}/** @type {Promise<Set<string>>} */this.promisedSsgManifest=new Promise(resolve=>{if(window.__SSG_MANIFEST){resolve(window.__SSG_MANIFEST);}else{window.__SSG_MANIFEST_CB=()=>{resolve(window.__SSG_MANIFEST);};}});}// Returns a promise for the dependencies for a particular route\ngetDependencies(route){return this.promisedBuildManifest.then(man=>man[route]&&man[route].map(url=>this.assetPrefix+\"/_next/\"+encodeURI(url))||[]);}/**\n   * @param {string} href the route href (file-system path)\n   * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n   */getDataHref(href,asPath){var getHrefForSlug=/** @type string */path=>{path=(0,_router.delBasePath)(path);return this.assetPrefix+\"/_next/data/\"+this.buildId+(path==='/'?'/index':path)+\".json\";};var{pathname:hrefPathname,query}=(0,_url.parse)(href,true);var{pathname:asPathname}=(0,_url.parse)(asPath);var route=normalizeRoute(hrefPathname);var isDynamic=(0,_isDynamic.isDynamicRoute)(route),interpolatedRoute;if(isDynamic){var dynamicRegex=(0,_routeRegex.getRouteRegex)(route);var dynamicGroups=dynamicRegex.groups;var dynamicMatches=// Try to match the dynamic route against the asPath\n(0,_routeMatcher.getRouteMatcher)(dynamicRegex)(asPathname)||// Fall back to reading the values from the href\n// TODO: should this take priority; also need to change in the router.\nquery;interpolatedRoute=route;if(!Object.keys(dynamicGroups).every(param=>{var value=dynamicMatches[param];var repeat=dynamicGroups[param].repeat;// support single-level catch-all\n// TODO: more robust handling for user-error (passing `/`)\nif(repeat&&!Array.isArray(value))value=[value];return param in dynamicMatches&&(// Interpolate group into data URL if present\ninterpolatedRoute=interpolatedRoute.replace(\"[\"+(repeat?'...':'')+param+\"]\",repeat?value.map(encodeURIComponent).join('/'):encodeURIComponent(value)));})){interpolatedRoute='';// did not satisfy all requirements\n// n.b. We ignore this error because we handle warning for this case in\n// development in the `<Link>` component directly.\n}}return isDynamic?interpolatedRoute&&getHrefForSlug(interpolatedRoute):getHrefForSlug(route);}/**\n   * @param {string} href the route href (file-system path)\n   * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n   */prefetchData(href,asPath){var{pathname:hrefPathname}=(0,_url.parse)(href,true);var route=normalizeRoute(hrefPathname);return this.promisedSsgManifest.then((s,_dataHref)=>// Check if the route requires a data file\ns.has(route)&&(// Try to generate data href, noop when falsy\n_dataHref=this.getDataHref(href,asPath))&&// noop when data has already been prefetched (dedupe)\n!document.querySelector(\"link[rel=\\\"\"+relPrefetch+\"\\\"][href^=\\\"\"+_dataHref+\"\\\"]\")&&// Inject the `<link rel=prefetch>` tag for above computed `href`.\nappendLink(_dataHref,relPrefetch,'fetch'));}loadPage(route){return this.loadPageScript(route);}loadPageScript(route){route=normalizeRoute(route);return new Promise((resolve,reject)=>{var fire=(_ref)=>{var{error,page,mod}=_ref;this.pageRegisterEvents.off(route,fire);delete this.loadingRoutes[route];if(error){reject(error);}else{resolve({page,mod});}};// If there's a cached version of the page, let's use it.\nvar cachedPage=this.pageCache[route];if(cachedPage){var{error,page,mod}=cachedPage;error?reject(error):resolve({page,mod});return;}// Register a listener to get the page\nthis.pageRegisterEvents.on(route,fire);// If the page is loading via SSR, we need to wait for it\n// rather downloading it again.\nif(document.querySelector(\"script[data-next-page=\\\"\"+route+\"\\\"]\")){return;}if(!this.loadingRoutes[route]){this.loadingRoutes[route]=true;if(process.env.__NEXT_GRANULAR_CHUNKS){this.getDependencies(route).then(deps=>{deps.forEach(d=>{if(/\\.js$/.test(d)&&!document.querySelector(\"script[src^=\\\"\"+d+\"\\\"]\")){this.loadScript(d,route,false);}if(/\\.css$/.test(d)&&!document.querySelector(\"link[rel=stylesheet][href^=\\\"\"+d+\"\\\"]\")){appendLink(d,'stylesheet').catch(()=>{// FIXME: handle failure\n// Right now, this is needed to prevent an unhandled rejection.\n});}});this.loadRoute(route);});}else{this.loadRoute(route);}}});}loadRoute(route){route=normalizeRoute(route);var scriptRoute=route==='/'?'/index.js':route+\".js\";var url=this.assetPrefix+\"/_next/static/\"+encodeURIComponent(this.buildId)+\"/pages\"+encodeURI(scriptRoute);this.loadScript(url,route,true);}loadScript(url,route,isPage){var script=document.createElement('script');if(process.env.__NEXT_MODERN_BUILD&&hasNoModule){script.type='module';// Only page bundle scripts need to have .module added to url,\n// dependencies already have it added during build manifest creation\nif(isPage)url=url.replace(/\\.js$/,'.module.js');}script.crossOrigin=process.crossOrigin;script.src=url;script.onerror=()=>{var error=new Error(\"Error loading script \"+url);error.code='PAGE_LOAD_ERROR';this.pageRegisterEvents.emit(route,{error});};document.body.appendChild(script);}// This method if called by the route code.\nregisterPage(route,regFn){var register=()=>{try{var mod=regFn();var pageData={page:mod.default||mod,mod};this.pageCache[route]=pageData;this.pageRegisterEvents.emit(route,pageData);}catch(error){this.pageCache[route]={error};this.pageRegisterEvents.emit(route,{error});}};if(process.env.NODE_ENV!=='production'){// Wait for webpack to become idle if it's not.\n// More info: https://github.com/zeit/next.js/pull/1511\nif(module.hot&&module.hot.status()!=='idle'){console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\"+route+\"\\\"\");var check=status=>{if(status==='idle'){module.hot.removeStatusHandler(check);register();}};module.hot.status(check);return;}}register();}/**\n   * @param {string} route\n   * @param {boolean} [isDependency]\n   */prefetch(route,isDependency){// https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n// License: Apache 2.0\nvar cn;if(cn=navigator.connection){// Don't prefetch if using 2G or if Save-Data is enabled.\nif(cn.saveData||/2g/.test(cn.effectiveType))return Promise.resolve();}/** @type {string} */var url;if(isDependency){url=route;}else{route=normalizeRoute(route);var scriptRoute=(route==='/'?'/index':route)+\".js\";if(process.env.__NEXT_MODERN_BUILD&&hasNoModule){scriptRoute=scriptRoute.replace(/\\.js$/,'.module.js');}url=this.assetPrefix+\"/_next/static/\"+encodeURIComponent(this.buildId)+\"/pages\"+encodeURI(scriptRoute);}return Promise.all(document.querySelector(\"link[rel=\\\"\"+relPrefetch+\"\\\"][href^=\\\"\"+url+\"\\\"], script[data-next-page=\\\"\"+route+\"\\\"]\")?[]:[appendLink(url,relPrefetch,url.match(/\\.css$/)?'style':'script'),process.env.__NEXT_GRANULAR_CHUNKS&&!isDependency&&this.getDependencies(route).then(urls=>Promise.all(urls.map(url=>this.prefetch(url,true))))]).then(// do not return any data\n()=>{},// swallow prefetch errors\n()=>{});}}exports.default=PageLoader;"]},"metadata":{},"sourceType":"script"}